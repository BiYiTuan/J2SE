

synchronized

synchronized 是JVM实现的一种锁, 当它用来修饰一个方法或者一个代码块的时候，能够保证在同一时刻最多只有一个线
程执行该段代码。

当两个并发线程访问同一个对象object中的这个synchronized(this)同步代码块时，一个时间内只能有一个线程得到执行。
另一个线程必须等待当前线程执行完这个代码块以后才能执行该代码块。

然而，当一个线程访问object的一个synchronized(this)同步代码块时，另一个线程仍然可以访问该object中的
非synchronized(this)同步代码块。


Java中每一个对象都可以作为锁，这是synchronized实现同步的基础:
1.普通同步方法，锁是当前实例对象 
2.静态同步方法，锁是当前类的class对象 
3.同步方法块，锁是括号里面的对象


其中锁的获取和释放分别是 monitor enter和 monitor exit 指令，该锁在实现上分为了偏向锁、轻量级锁和重量级锁，其中偏
向锁在1.6是默认开启的，轻量级锁在多线程竞争的情况下会膨胀成重量级锁，有关锁的数据都保存在对象头中。

